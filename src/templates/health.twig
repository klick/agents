{% extends "_layouts/cp" %}

{% set title = "Agents Health" %}
{% set selectedSubnavItem = "health" %}

{% block content %}
  <h1>Agents Health</h1>
  <p class="text-sm text-muted">Live health and readiness data from the plugin runtime.</p>

  <div class="border rounded p-3" style="margin-bottom: 16px;">
    <h2 class="h4">Service State</h2>
    <p>
      <span class="status {{ agentsEnabled ? 'enabled' : 'disabled' }}"></span>
      <strong>{{ agentsEnabled ? 'Enabled' : 'Disabled' }}</strong>
      <span class="text-muted">(source: {{ agentsEnabledSource == 'env' ? 'environment variable' : 'plugin settings' }})</span>
    </p>
    <p>Health status: <strong>{{ health.status|default('unknown') }}</strong></p>
    <p>Readiness score: <strong>{{ readiness.readinessScore|default(0) }}</strong></p>
  </div>

  <div class="border rounded p-3" style="margin-bottom: 16px;">
    <h2 class="h4">Health JSON</h2>
    <pre class="border rounded p-3">{{ healthJson }}</pre>
  </div>

  <div class="border rounded p-3">
    <h2 class="h4">Readiness JSON</h2>
    <pre class="border rounded p-3">{{ readinessJson }}</pre>
  </div>
{% endblock %}
